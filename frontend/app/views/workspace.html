<div class="container" >
  <div id="command-bar">
    <div class="navbar navbar-inverse">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-inverse-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
      <div class="navbar-collapse collapse navbar-inverse-collapse">
        <!-- <ul class="nav navbar-nav">
                    <li><a href="#">Undo</a></li>
                    <li><a href="#">Redo</a></li>
                    <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="#">Action</a></li>
                        <li><a href="#">Another action</a></li>
                        <li><a href="#">Something else here</a></li>
                        <li class="divider"></li>
                        <li class="dropdown-header">Dropdown header</li>
                        <li><a href="#">Separated link</a></li>
                        <li><a href="#">One more separated link</a></li>
                    </ul>
                    </li>
                </ul> -->
        <ul class="nav navbar-nav navbar-right">
          <li><a ng-click="run()">Run</a></li>
          <li><a id="save-workspace" ng-click="sendData()">Save</a></li>
          <li><a ng-click="clearCommands()">Clear all</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>

<div class="container" >

  <div class="row">
    <div class="col-xs-4" id="command-palette">
      <div class="panel panel-primary">
        <div class="panel-heading">
          <h3 class="panel-title">Choose your ninja!</h3>
        </div>
        <div class="panel-body">


          <div class="row">
            <div class="col-xs-3" ng-repeat="color in playerColors">
              <label class="ninjas">
                <input type="radio" name="color" ng-model="$parent.ninjaColor" value="{{color}}">
                <img ng-src="game_images/ninja-{{color}}.png">
              </label>
            </div>
          </div>

          <!--
          <div class="row">
            <div class="col-xs-3" ng-repeat="color in playerColor">
              <input type="radio" name="{{ color.name }}" value="{{ color.value }}" ng-click="setPlayerColor(color)" ng-checked="color.selected">
            </div>
          </div>
          //-->
        </div>
      </div>



      <div class="panel panel-primary">
        <div class="panel-heading">
          <h3 class="panel-title">Navigation</h3>
        </div>
        <div class="panel-body" id="move-command-palette">

          <div  class="row" ng-repeat='navCommand in navigation' ng-show="navCommand.command" data-drag="true" data-jqyoui-options="{revert: 'invalid', helper: 'clone'}" ng-model="navigation" jqyoui-draggable="{index: {{$index}}, animate: false, placeholder: 'keep'}" data-type="move" data-direction="up" data-steps="0" >
            <div class="command-object move-command">
              <div class="input-group">
                <span class="input-group-addon input-group-addon-black">{{ navCommand.command }}</span>
                <div class="input-group-btn">
                  <button type="button" class="btn btn-default" data-toggle="dropdown">
                    <span class="text-only">{{ navCommand.commandType }}&nbsp;&nbsp;&nbsp;</span> </button>

                </div>

                <br />

              </div>
            </div>
          </div>

        </div>


      </div>

      <div class="panel panel-primary">
        <div class="panel-heading">
          <h3 class="panel-title">Iteration</h3>
        </div>
        <div class="panel-body">
          <div class="row" ng-repeat="loop in loopCommands" ng-show="loop.command" data-drag="true" data-jqyoui-options="{revert: 'invalid', helper: 'clone'}" ng-model="loopCommands" jqyoui-draggable="{index: {{$index}}, animate: false, placeholder: 'keep'}">
            <div class="command-object">
              <div class="input-group">
                <span class="input-group-addon input-group-addon-green" ng-show="loop.command">{{ loop.command }}</span>
                <div class="input-group-btn"  ng-show="loop.commandType">
                  <button type="button" class="btn btn-success" data-toggle="dropdown">
                    <span class="text-only">{{ loop.commandType }}&nbsp;&nbsp;&nbsp;</span> </button>

                </div>
                <input type="text" class="form-control" ng-model="loop.parameters" ng-show="loop.parameters">

                <br />

              </div>
            </div>
            <!-- <button type="button" class="btn btn-default btn-block text-left">For ( ... )</button>
                    <button type="button" class="btn btn-default btn-block text-left">Do While</button> -->
          </div>
        </div>
      </div>
      <div class="panel panel-primary">
                <div class="panel-heading">
                    <h3 class="panel-title">Control</h3>
                </div>
                <div class="panel-body">
                    <button type="button" class="btn btn-default btn-block text-left">If </button>
                    <button type="button" class="btn btn-default btn-block text-left">End If </button>
                    <select ng-model="selectedObject" ng-options="gameObject.name group by gameObject.effect for gameObject in gameObjects">
                    </select>
                </div>
            </div>
    </div>
    <div class="col-xs-8">
      <div class="panel panel-primary">
        <div class="panel-body" id="workspace-main" data-drop="true" ng-model="commandsWorkspace" jqyoui-droppable="{multiple:true, onDrop: 'setNestLevel'}" >


          <div class="row" ng-repeat="item in commandsWorkspace track by $index" ng-show="item.command" data-drag="true" data-jqyoui-options="{revert: 'invalid', helper: 'clone'}" ng-model="commandsWorkspace" jqyoui-draggable="{index: {{$index}}, animate:false}">
            <div class="col-xs-1 text-center line-number">
              <h4>{{ $index+1 }}</h4>
            </div>
            <div class="col-xs-offset-{{item.nestLevel}} col-xs-{{11-item.nestLevel}} command-object">
              <div class="input-group">
                <span class="input-group-addon" ng-show="item.command" ng-class="{'input-group-addon-black':item.command=='Move','input-group-addon-green':item.commandType=='Loop'}">{{ item.command }}</span>
                <div class="input-group-btn" ng-show="item.commandType">
                  <button type="button" class="btn" data-toggle="dropdown" ng-class="{'btn-default':item.command=='Move','btn-success':item.commandType=='Loop'}">
                    <span class="text-only">{{ item.commandType }}</span>
                  </button>
                </div>
                <input type="text" class="form-control" ng-model="item.parameters" ng-model-options="{ updateOn: 'blur' }" ng-show="showField(item)" />
                <span class="input-group-btn">
                  <button class="btn btn-default close-button" type="button" ng-click="removeCommands($index)">X</button>
                </span>
              </div>

            </div>
          </div>


          <div class="placeholder">
            <div class="row">
              <div class="col-xs-1 text-center line-number">
                <h4>{{ commandsWorkspace.length+1 }}</h4>
              </div>
              <div class="col-xs-11">
                <h4>Add your items here</h4>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
